% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/1_moving_average.R, R/print.R
\name{moving_average}
\alias{moving_average}
\alias{is.moving_average}
\alias{is_symmetric}
\alias{upper_bound}
\alias{lower_bound}
\alias{mirror}
\alias{rev.moving_average}
\alias{length.moving_average}
\alias{to_seasonal}
\alias{show,moving_average-method}
\title{Manipulation of moving averages}
\usage{
moving_average(
  x,
  lags = -length(x),
  trailing_zero = FALSE,
  leading_zero = FALSE
)

is.moving_average(x)

is_symmetric(x)

upper_bound(x)

lower_bound(x)

mirror(x)

\method{rev}{moving_average}(x)

\method{length}{moving_average}(x)

to_seasonal(x, s)

\S4method{show}{moving_average}(object)
}
\arguments{
\item{x}{vector of coefficients}

\item{lags}{integer indicating the number of lags of the moving average.}

\item{trailing_zero, leading_zero}{boolean indicating wheter to remove leading/trailing zero and NA.}

\item{s}{seasonal period for the \code{to_seasonal()} function.}

\item{object}{\code{moving_average} object.}
}
\description{
Manipulation of moving averages
}
\examples{
y <- rjd3toolkit::retail$AllOtherGenMerchandiseStores
e1 <- moving_average(rep(1,12), lags = -6)
e1 <- e1/sum(e1)
e2 <- moving_average(rep(1/12, 12), lags = -5)
M2X12 <- (e1 + e2)/2
coef(M2X12)
M3 <- moving_average(rep(1/3, 3), lags = -1)
M3X3 <- M3 * M3
# M3X3 moving average applied to each month
M3X3
M3X3_seasonal <- to_seasonal(M3X3, 12)
# M3X3_seasonal moving average applied to the global series
M3X3_seasonal

def.par <- par(no.readonly = TRUE)
par(mai = c(0.5, 0.8, 0.3, 0))
layout(matrix(c(1,2), nrow = 1))
plot_gain(M3X3, main = "M3X3 applied to each month")
plot_gain(M3X3_seasonal, main = "M3X3 applied to the global series")
par(def.par)

# To apply the moving average
t <- y * M2X12
# Or use the filter() function:
t <- filter(y, M2X12)
si <- y - t
s <- si * M3X3_seasonal
# or equivalently:
s_mm <- M3X3_seasonal * (1 - M2X12)
s <- y * s_mm
plot(s)
}
